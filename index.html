<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ“Š InfoVault</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f0f2f5;
    color: #333;
    padding: 20px;
  }

  h2 {
    text-align: center;
    margin-bottom: 25px;
    font-size: 2em;
    color: #2c3e50;
  }

  .box {
    background: #fff;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 25px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  .box h3 {
    margin-bottom: 15px;
    color: #34495e;
  }

  .box input, .box button, .box select {
    padding: 8px 12px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 14px;
  }

  .box button {
    cursor: pointer;
    background-color: #3498db;
    color: #fff;
    border: none;
    transition: 0.3s;
  }

  .box button:hover {
    background-color: #2980b9;
  }

  .add-row {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items: center;
  }

  .add-row input, .add-row select, .add-row button {
    min-width: 80px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
  }

  th, td {
    border: 1px solid #ccc;
    padding: 8px;
    text-align: center;
  }

  th {
    background: #3498db;
    color: #fff;
  }

  tr:nth-child(even) {
    background: #f7f9fc;
  }

  tr:hover {
    background: #e1ecf7;
  }

  td input, td select {
    width: 100%;
    box-sizing: border-box;
    padding: 6px;
    border-radius: 4px;
    border: 1px solid #ccc;
  }

  td a {
    color: #3498db;
    text-decoration: none;
  }

  td a:hover {
    text-decoration: underline;
  }
</style>
</head>
<body>

<h2>ðŸ“Š InfoVault</h2>

<!-- Type Selector -->
<div class="box">
  <h3>Select Entry Type</h3>
  <select id="entryType" onchange="changeType()">
    <option value="movie">Movie/Series</option>
    <option value="software">Software/Server</option>
  </select>
</div>

<!-- Add Entry -->
<div class="box" id="addBox">
  <h3>Add New Entry</h3>
  <div class="add-row" id="addRow"></div>
  <button onclick="save()">Add Entry</button>
</div>

<!-- Search -->
<div class="box">
  <h3>Search Database</h3>
  <input id="key" placeholder="ID / Name / Type / Genre / Country / Personality">
  <button onclick="search()">Search</button>

  <table>
    <thead id="tableHead"></thead>
    <tbody id="res"></tbody>
  </table>
</div>

<script>
var API = "https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec";

var currentType = "movie";

// Field templates
const fields = {
  movie: [
    {id:"name", placeholder:"Movie / Series Name"},
    {id:"genre", placeholder:"Genre", type:"datalist", options:["Action","Adventure","Drama","Comedy","Horror","Romance","Sci-Fi"]},
    {id:"country", placeholder:"Country", type:"datalist", options:["USA","UK","India","Japan","Korea","France"]},
    {id:"year", placeholder:"Release Year", type:"number"},
    {id:"link", placeholder:"Link (Trailer / IMDb / Streaming)"}
  ],
  software: [
    {id:"name", placeholder:"Software / Server Name"},
    {id:"personality", placeholder:"Famous Personality / Contributor", type:"datalist", options:["Linus Torvalds","Elon Musk","Bill Gates","Steve Jobs","Ada Lovelace"]},
    {id:"version", placeholder:"Version"},
    {id:"link", placeholder:"Link (Documentation / Download)"}
  ]
};

// Table headers
const headers = {
  movie: ["ID","Name","Genre","Country","Year","Link","Action"],
  software: ["ID","Name","Personality","Version","Link","Action"]
}

// Render input fields
function changeType(){
  currentType = document.getElementById("entryType").value;
  var row = document.getElementById("addRow");
  row.innerHTML = "";
  fields[currentType].forEach(f=>{
    if(f.type==="datalist"){
      row.innerHTML += `<input list="${f.id}List" id="${f.id}" placeholder="${f.placeholder}">
        <datalist id="${f.id}List">${f.options.map(o=>`<option>${o}</option>`).join("")}</datalist>`;
    } else {
      row.innerHTML += `<input id="${f.id}" placeholder="${f.placeholder}" ${f.type==="number"?"type='number'":""}>`;
    }
  });
  renderTableHead();
}

// Table headers
function renderTableHead(){
  var th = document.getElementById("tableHead");
  th.innerHTML = "<tr>" + headers[currentType].map(h=>`<th>${h}</th>`).join("") + "</tr>";
}

// Add new option dynamically
function addOption(id){
  var val = prompt("Enter new option for " + id + ":");
  if(val){
    var list = document.getElementById(id+"List");
    var exists = Array.from(list.options).some(o=>o.value.toLowerCase() === val.toLowerCase());
    if(!exists){
      var option = document.createElement("option");
      option.value = val;
      list.appendChild(option);
      document.getElementById(id).value = val;
      alert(val + " added!");
    } else {
      alert(val + " already exists!");
      document.getElementById(id).value = val;
    }
  }
}

// Save entry
function save(){
  var data = {action:"add", id:Date.now(), type: currentType};
  fields[currentType].forEach(f=>{
    data[f.id] = document.getElementById(f.id).value;
  });

  fetch(API,{method:"POST", body:JSON.stringify(data)})
    .then(()=>{ alert("Saved!"); clearInputs(); })
    .catch(err=>alert("Error: "+err));
}

function clearInputs(){
  fields[currentType].forEach(f=>document.getElementById(f.id).value="");
}

// Search
function search(){
  var key = document.getElementById("key").value;
  fetch(API,{method:"POST", body:JSON.stringify({action:"search", key:key})})
    .then(r=>r.json())
    .then(show)
    .catch(err=>alert("Error: "+err));
}

// Show search results
function show(data){
  var res = document.getElementById("res");
  res.innerHTML = "";
  data.forEach(r=>{
    var row = "<tr>";
    headers[currentType].forEach((h,i)=>{
      if(h==="Link") row += `<td>${r[i]?'<a href="'+r[i]+'" target="_blank">Open Link</a>':''}</td>`;
      else if(h==="Action") row += `<td><button onclick="update('${r[0]}')">Update</button></td>`;
      else row += `<td><input value="${r[i]}"></td>`;
    });
    row += "</tr>";
    res.innerHTML += row;
  });
}

// Update (basic)
function update(id){
  alert("Use your Google Apps Script to handle updates for ID: "+id);
}

// Initial render
changeType();
</script>

</body>
</html>
